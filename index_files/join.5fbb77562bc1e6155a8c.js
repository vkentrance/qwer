(()=>{"use strict";var e,t,n,o={988882:(e,t,n)=>{n.d(t,{Config:()=>k,Connect:()=>Q});var o=n(190484),i=n(896156);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p,h,g="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",_=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21,t="",n=e;n--;)t+=g[64*Math.random()|0];return t},m=["agreements","promo","vkc_behavior","vkc_auth_action","vkc_brand","vkc_display_mode","service_groups","external_device_id"];(h=p||(p={}))[h.UNKNOWN=1]="UNKNOWN",h[h.MISSING_PARAM=2]="MISSING_PARAM",h[h.CONNECTION_LOST=3]="CONNECTION_LOST",h[h.USER_DENIED=4]="USER_DENIED",h[h.INVALID_PARAMS=5]="INVALID_PARAMS",h[h.CUSTOM=6]="CUSTOM",h[h.CONNECT_WINDOW_CLOSED=7]="CONNECT_WINDOW_CLOSED",h[h.CONNECT_WINDOW_NOT_OPENED=8]="CONNECT_WINDOW_NOT_OPENED",h[h.CONNECT_DOMAIN_NOT_ALLOWED=9]="CONNECT_DOMAIN_NOT_ALLOWED",h[h.CONNECT_UNKNOWN_SDK_MESSAGE=10]="CONNECT_UNKNOWN_SDK_MESSAGE",h[h.OLD_MISSING_PARAM=100]="OLD_MISSING_PARAM";var v=function(e){return'URL domain "'.concat(e,'" is not allowed.')},S=function(e){return"This SDK message is unknown: ".concat(e)},E=!("undefined"==typeof window||!window.document||!window.document.createElement),f=function(){};if(E&&!!window.addEventListener)try{var y=Object.defineProperty({},"passive",{get:function(){}});window.addEventListener("test",f,y),window.removeEventListener("test",f,y)}catch(h){}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(){if(!E)return!1;try{document.createElement("div").scrollTo({top:0,get behavior(){return!0,"smooth"}})}catch(e){}}();var R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==(0,o.default)(e)||null===e)return"";t=T({encode:!0},t);var n=function(e){return t.encode?encodeURIComponent(e):String(e)};return Object.keys(e).reduce((function(o,i){var r=e[i];return void 0===r?o:null===r?(t.skipNull||o.push([n(i),""].join("=")),o):Array.isArray(r)?(r.map((function(e){o.push("".concat(n(i),"[]=").concat(n(e)))})).join(),o):(o.push([n(i),n(r)].join("=")),o)}),[]).join("&")};function O(e){return R(e)}function w(e){return Object.keys(e).filter((function(e){return m.includes(e)}))}function C(e){var t;return Boolean(null===(t=w(e))||void 0===t?void 0:t.length)}function A(e){var t=function(e){return w(e).reduce((function(t,n){return t[n]=e[n],t}),{})}(e);return btoa(JSON.stringify(t))}function P(e,t){var n,o=document.createElement("iframe");for(var i in e&&(o.src=e),o.style.cssText=null!==(n=null==t?void 0:t.cssText)&&void 0!==n?n:"",o.width="100%",o.height="100%",o.style.border="none",null==t?void 0:t.properties){var r;t&&t.properties.hasOwnProperty(i)&&(o[i]=null!==(r=t.properties[i])&&void 0!==r?r:"")}return o}function b(e){return e=e||Object.create(null),{on:function(t,n){(e[t]||(e[t]=[])).push(n)},off:function(t,n){e[t]&&e[t].splice(e[t].indexOf(n)>>>0,1)},emit:function(t,n){(e[t]||[]).slice().map((function(e){e(n)})),(e["*"]||[]).slice().map((function(e){e(t,n)}))}}}var N,j={appId:0,superAppToken:"",loginDomain:"login.vk.com",oauthDomain:"oauth.vk.com",connectDomain:"connect.vk.com",_debug:!1},D={},k={events:b(),init:function(e){if(!e.appId)throw new Error("appId required");j.appId=e.appId,j.superAppToken=e.superAppToken||"",j.loginDomain=e.loginDomain||"login.vk.com",j.oauthDomain=e.oauthDomain||"oauth.vk.com",j.connectDomain=e.connectDomain||"connect.vk.com",j.appSettings=e.appSettings,j._debug=!!e._debug},get:function(){return j},setSuperAppToken:function(e){j.superAppToken=e,k.events.emit("superAppToken",e)},onRequestSuperAppToken:function(e){D.superAppToken=e},_requestSuperAppToken:function(){var e;D.superAppToken&&(e=D.superAppToken()),e&&e.then((function(e){return k.setSuperAppToken(e)})).catch(console.error)},onAuth:function(e){D.auth=e},_requestAuth:function(){var e;D.auth&&(e=D.auth()),e&&e.then((function(e){return k.setSuperAppToken(e)})).catch(console.error)},onOpenApp:function(e){D.openApp=e},_openApp:function(e){D.openApp&&D.openApp(e.app)}},L=["extend_token","login_with_user","__sferum_invite_link","registration_with_phone"];function F(e){return e&&L.includes(e.name)?btoa(JSON.stringify(e)):""}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auth",n=k.get(),o=n.appId,i=n.connectDomain,r=n.appSettings,a=d({app_id:o,response_type:"silent_token",v:"0.0.2"},e);r&&C(r)&&(a.app_settings=A(r));var s=O(a);return"https://".concat(i,"/").concat(t,"?").concat(s)}!function(e){e.Default="default",e.NamePhone="name_phone",e.PhoneName="phone_name"}(N||(N={}));var x,U=[N.Default,N.NamePhone,N.PhoneName];!function(e){e.Primary="primary",e.Flat="flat"}(x||(x={}));var B=[x.Primary,x.Flat];function K(e,t){return void 0===e?t:"number"!=typeof e?e?1:0:e}function H(e,t){return e&&"object"===r(e)?Object.keys(e).reduce((function(n,o){return t.includes(o)?(n[o]=e[o],n):n}),{}):e}var V,G,Y,W,J,z,q=function e(t){var n=this;a(this,e),l(this,"handler",(function(){return{}})),l(this,"config",void 0),l(this,"destroy",(function(){delete n.config,window.removeEventListener("message",n.handleMessage)})),l(this,"onMessage",(function(e){n.handler=e})),l(this,"sendMessage",(function(e){n.config.iframe.contentWindow.postMessage(d({type:"vk-sak-sdk"},e),n.config.origin)})),l(this,"handleMessage",(function(e){n.config.origin&&e.origin===n.config.origin&&e.source===n.config.iframe.contentWindow&&e.data&&"vk-sak-sdk"===e.data.type&&n.handler(e.data)})),this.config=t,window.addEventListener("message",this.handleMessage)};!function(e){e.SHOW_DATA_POLICY="VKSDKOneTapAuthConnectDataPolicy",e.HIDE_DATA_POLICY="VKSDKOneTapAuthDataPolicyClose",e.DATA_POLICY_RESULT="VKSDKOneTapAuthDataPolicyResult",e.SHOW_CAPTCHA="VKSDKOneTapAuthDataPolicyShowCaptcha"}(V||(V={})),function(e){e.SHOW_POLICY_AGREEMENTS="VKSDKOneTapAuthPolicyAgreementsShow",e.HIDE_POLICY_AGREEMENTS="VKSDKOneTapAuthPolicyAgreementsHide",e.ACCEPT_POLICY_AGREEMENTS="VKSDKOneTapAuthPolicyAgreementsAccept",e.DECLINE_POLICY_AGREEMENTS="VKSDKOneTapAuthPolicyAgreementsDecline",e.POLICY_AGREEMENTS_ERROR="VKSDKOneTapAuthPolicyAgreementsError",e.SHOW_DATA_POLICY="VKSDKOneTapAuthPolicyAgreementsShowDataPolicy"}(G||(G={})),function(e){e.CAPTCHA_SUCCESS="VKSDKAuthCaptchaSuccess",e.CAPTCHA_FAIL="VKSDKAuthCaptchaFail"}(Y||(Y={})),function(e){e.PHONE_VALIDATION_NEEDED="VKSDKOneTapAuthPhoneValidationNeeded",e.FULL_AUTH_NEEDED="VKSDKOneTapAuthFullAuthNeeded",e.AUTH_DATA_LOADED="VKSDKOneTapAuthDataLoaded",e.NOT_AUTHORIZED="VKSDKOneTapAuthNotAuthorized",e.LOGIN_SUCCESS="VKSDKOneTapAuthLoginSuccess",e.RESIZE_FRAME="VKSDKOneTapResizeFrame",e.SHOW_CAPTCHA="VKSDKOneTapShowCaptcha",e.VALIDATE_CAPTCHA="VKSDKOneTapValidateCaptcha"}(W||(W={})),function(e){e.CLOSE_AUTH="VKSDKOneTapAuthClose",e.ADAPTIVITY_CHANGE="VKSDKFloatingOneTapAdaptivityChange",e.ADAPTIVITY_CHANGED="VKSDKFloatingOneTapAdaptivityChanged"}(J||(J={})),function(e){e.SHOW_LOGIN="VKSDKButtonOneTapAuthShowLogin",e.SHOW_LOGIN_OPTIONS="VKSDKButtonOneTapAuthShowLoginOptions",e.SHOW_AGREEMENTS_DIALOG="VKSDKButtonOneTapAuthShowAgreementsDialog",e.START_AUTHORIZE="VKSDKButtonOneTapAuthStartAuthorize"}(z||(z={}));var Z,$,X,Q=new function e(){var t=this;a(this,e),l(this,"flags",null),l(this,"silentAuth",(function(){var e=k.get(),t=e.loginDomain,n=e.appId,o=_(),i="https://".concat(t,"/?act=connect&app_id=").concat(n,"&response_type=").concat("silent_token","&uuid=").concat(o,"&v=").concat("0.0.2"),r=new XMLHttpRequest;return r.open("GET",i,!0),r.responseType="json",r.withCredentials=!0,new Promise((function(e,t){r.onload=function(){r.response?e({provider:"vk",payload:r.response}):t()},r.onerror=function(){t()},r.send()}))})),l(this,"oneTapAuth",(function(e,n){if(console.warn("Connect.oneTapAuth method is deprecated. Use Connect.floatingOneTapAuth and Connect.buttonOneTapAuth methods."),!["floating","button"].includes(e))return null;switch(e){case"button":return t.buttonOneTapAuth(n);case"floating":return t.floatingOneTapAuth(n);default:return null}})),l(this,"floatingOneTapAuth",(function(e){var n,o,i=function(){var e,t=window.innerWidth,n=t<=768;return{destroy:function(){return window.removeEventListener("resize",e)},isAdaptive:function(){return n},observe:function(o){e=function(){var e=window.innerWidth;t>768&&e<=768?o(n=!0):t<=768&&e>768&&o(n=!1),t=e},window.addEventListener("resize",e)}}}(),r=(o=(n=i.isAdaptive())?"314px":"334px",{pageUrl:"floating_one_tap_auth",pageUrlParams:{adaptive:n?1:0},frameStyles:n?"\n      display: none;\n      position: fixed;\n      bottom: 0;\n      right: 50%;\n      transform: translate(50%, 0);\n      max-width: 468px;\n      width: 100%;\n      height: ".concat(o,";\n    "):"\n        display: none;\n        position: fixed;\n        top: 0;\n        right: 0;\n        max-width: 400px;\n        width: 100%;\n        height: ".concat(o,";\n      ")});if(!r)throw new Error("options were not set");var a=_(),s=P(M(d({origin:location.protocol+"//"+location.host,uuid:a},r.pageUrlParams),r.pageUrl),{cssText:r.frameStyles}),c=new q({iframe:s,origin:"https://"+k.get().connectDomain});i.observe((function(e){c.sendMessage({handler:J.ADAPTIVITY_CHANGE,params:{uuid:a,is_adaptive:e}}),e?(s.style.maxWidth="468px",s.style.top="auto",s.style.bottom="0",s.style.right="50%",s.style.transform="translate(50%, 0)"):(s.style.maxWidth="400px",s.style.top="0",s.style.bottom="auto",s.style.right="0",s.style.transform="none"),s.style.display="none"})),document.body.appendChild(s);var l=function(){c.sendMessage({handler:W.RESIZE_FRAME,params:{uuid:a}})};window.addEventListener("resize",l);var u=function(){s&&(s.remove(),s=null),window.removeEventListener("resize",l),i&&i.destroy(),c.destroy()},p=new Promise((function(n){c.onMessage((function(o){if(o.params.uuid===a)switch(o.handler){case W.NOT_AUTHORIZED:e.callback({type:o.handler,payload:{uuid:a,error:"not_authorized"}}),u(),n(o.handler);break;case W.RESIZE_FRAME:s.style.height="".concat(o.params.height,"px");break;case J.CLOSE_AUTH:e.callback({type:o.handler,payload:{uuid:a}}),u();break;case J.ADAPTIVITY_CHANGED:s.style.display="block";break;case W.AUTH_DATA_LOADED:s.style.display="block",n(o.handler);default:t.handleOneTapEvents(o,c,e)}}))}));return{getFrame:function(){return s},destroy:u,authReadyPromise:p}})),l(this,"buttonOneTapAuth",(function(e){var n=function(e){var t,n,o,i,r,a,s={},c=44,l=56;e&&(s.display=e.displayMode&&U.includes(e.displayMode)?e.displayMode:N.Default,s.button_skin=e.buttonSkin&&B.includes(e.buttonSkin)?e.buttonSkin:x.Primary,s.show_agreements=K(e.showAgreements,0),s.show_alternative_login=K(e.showAlternativeLogin,0),s.show_agreements_dialog=K(e.showAgreementsDialog,1),void 0!==(null===(t=e.buttonStyles)||void 0===t?void 0:t.height)&&(c=Number(null===(o=e.buttonStyles)||void 0===o?void 0:o.height),l=Number(null===(i=e.buttonStyles)||void 0===i?void 0:i.height)+12,s.style_height=null===(r=e.buttonStyles)||void 0===r?void 0:r.height),void 0!==(null===(n=e.buttonStyles)||void 0===n?void 0:n.borderRadius)&&(s.style_border_radius=null===(a=e.buttonStyles)||void 0===a?void 0:a.borderRadius),c+=s.show_alternative_login?l:0,c+=s.show_agreements?80:0);return{pageUrl:"button_one_tap_auth",pageUrlParams:s,frameStyles:"\n        height: ".concat(c,"px;\n      ")}}(e.options);if(!n)throw new Error("options were not set");var o=_(),i=P(M(d({origin:location.protocol+"//"+location.host,uuid:o},n.pageUrlParams),n.pageUrl),{cssText:n.frameStyles}),r=e.container;r&&r.appendChild(i);var a=new q({iframe:i,origin:"https://"+k.get().connectDomain}),s=function(){a.sendMessage({handler:W.RESIZE_FRAME,params:{uuid:o}})};return window.addEventListener("resize",s),{getFrame:function(){return i},destroy:function(){i&&(i.remove(),i=null),window.removeEventListener("resize",s),a.destroy()},authReadyPromise:new Promise((function(n){a.onMessage((function(r){if(r.params.uuid===o)switch(r.handler){case W.RESIZE_FRAME:i.style.height="".concat(r.params.height,"px");break;case W.NOT_AUTHORIZED:n(r.handler);break;case z.SHOW_LOGIN:case z.SHOW_LOGIN_OPTIONS:e.callback({type:r.handler,payload:{uuid:o}});break;case z.SHOW_AGREEMENTS_DIALOG:t.userPolicyAgreements(o).show().then((function(e){e&&e.accepted&&a.sendMessage({handler:z.START_AUTHORIZE,params:{uuid:o}})})).catch((function(){a.sendMessage({handler:G.DECLINE_POLICY_AGREEMENTS,params:{uuid:o}})}));break;case W.AUTH_DATA_LOADED:n(r.handler);default:t.handleOneTapEvents(r,a,e)}}))}))}})),l(this,"handleOneTapEvents",(function(e,n,o){var i=e.params.uuid;switch(e.handler){case W.AUTH_DATA_LOADED:n.sendMessage({handler:W.RESIZE_FRAME,params:{uuid:i}});break;case W.LOGIN_SUCCESS:o.callback({type:e.handler,provider:"vk",payload:e.params});break;case W.SHOW_CAPTCHA:var r=t.captcha(i,{captcha_sid:e.params.captcha_sid,captcha_img:e.params.captcha_img});r.show().then((function(e){n.sendMessage({handler:Y.CAPTCHA_SUCCESS,params:d({uuid:i},e)})})).catch((function(){n.sendMessage({handler:Y.CAPTCHA_FAIL,params:{uuid:i}}),r.destroy()}));break;case V.SHOW_DATA_POLICY:t.userDataPolicy(i).show().then((function(){o.callback({type:V.DATA_POLICY_RESULT,payload:{uuid:i,policyAccepted:!0}})})).catch((function(){o.callback({type:V.DATA_POLICY_RESULT,payload:{uuid:i,policyAccepted:!1}})}));break;case W.FULL_AUTH_NEEDED:case W.PHONE_VALIDATION_NEEDED:o.callback({type:e.handler,payload:{uuid:i}})}})),l(this,"userDataPolicy",(function(e){var n=M({origin:location.protocol+"//"+location.host,uuid:e},"user_data_policy"),o=window.innerHeight,i="\n      display: none;\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: ".concat(o,"px;\n      min-height: ").concat(o,"px;\n      border: none;\n      z-index: 99999;\n    "),r=P(n,{properties:{height:"".concat(o,"px")},cssText:i});document.body.appendChild(r);var a=new q({iframe:r,origin:"https://"+k.get().connectDomain}),s=function(){r.style.display="none"};return{show:function(){return r.style.display="block",new Promise((function(n,o){a.onMessage((function(i){switch(i.handler){case V.HIDE_DATA_POLICY:s(),n();break;case V.SHOW_CAPTCHA:var c=t.captcha(e,{captcha_sid:i.params.captcha_sid,captcha_img:i.params.captcha_img});c.show().then((function(t){a.sendMessage({handler:Y.CAPTCHA_SUCCESS,params:d({uuid:e},t)}),r.style.display="block"})).catch((function(){a.sendMessage({handler:Y.CAPTCHA_FAIL,params:{uuid:e}}),c.destroy()})),s();break;default:s(),o()}}))}))},hide:s,destroy:function(){document.body.removeChild(r),a.destroy()}}})),l(this,"userPolicyAgreements",(function(e){var n,o,i,r=(n=M({origin:location.protocol+"//"+location.host,uuid:e},"user_policy_agreements"),o=window.innerHeight,i="\n      display: none;\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: ".concat(o,"px;\n      min-height: ").concat(o,"px;\n      border: none;\n      z-index: 99999;\n    "),P(n,{properties:{height:"".concat(o,"px")},cssText:i}));document.body.appendChild(r);var a=new q({iframe:r,origin:"https://"+k.get().connectDomain}),s=function(){r.style.display="none"};return{show:function(){return r.style.display="block",new Promise((function(n,o){a.onMessage((function(i){switch(i.handler){case G.ACCEPT_POLICY_AGREEMENTS:s(),n({accepted:!0});break;case G.DECLINE_POLICY_AGREEMENTS:s(),n({accepted:!1});break;case G.SHOW_DATA_POLICY:s();var a=function(){r.style.display="block"};t.userDataPolicy(e).show().then(a).catch(a);break;case G.POLICY_AGREEMENTS_ERROR:case G.HIDE_POLICY_AGREEMENTS:default:s(),o()}}))}))},hide:s,destroy:function(){document.body.removeChild(r),a.destroy()}}})),l(this,"captcha",(function(e,t){var n=M(d({origin:location.protocol+"//"+location.host,uuid:e},t),"auth_captcha"),o=window.innerHeight,i=P(n,{cssText:"\n      display: none;\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: ".concat(o,"px;\n      min-height: ").concat(o,"px;\n      border: none;\n      z-index: 99999;\n    ")});document.body.appendChild(i);var r=new q({iframe:i,origin:"https://"+k.get().connectDomain}),a=function(){document.body.removeChild(i),r.destroy()};return{show:function(){return i.style.display="block",new Promise((function(e,t){r.onMessage((function(n){switch(n.handler){case Y.CAPTCHA_SUCCESS:e(n.params),a();break;default:t(),a()}}))}))},destroy:a}})),l(this,"userVisibleAuth",(function(e){var n=_(),o=d({origin:location.protocol+"//"+location.host,uuid:n},H(e,["screen","source"])),i=F(null==e?void 0:e.action);i&&(o.action=i);var r=M(o);t.flags&&(r="".concat(r,"#").concat(O(t.flags)));var a=screen.height/2-280,s=screen.width/2-410,c=window.open(r,"_blank","top=".concat(a,",left=").concat(s,",width=").concat(820,",height=").concat(560,",location"));if(!c){var l={code:p.CONNECT_WINDOW_NOT_OPENED,reason:"Connect window was not opened."};return Promise.reject(l)}return new Promise((function(e,t){var o=setInterval((function(){if(!c||c.closed){window.removeEventListener("message",i),clearInterval(o);var e={code:p.CONNECT_WINDOW_CLOSED,reason:"Connect window was closed."};t(e)}}),1e3);function i(r){if(r.source===c&&c)if(window.removeEventListener("message",i),clearInterval(o),".vk.com"===r.origin.slice(r.origin.length-".vk.com".length))if(r.data.action==="vk_connect_response"+n){var a=r.data.payload;c.close(),e({provider:"vk",payload:a})}else if(r.data.action==="oauth_callback"+n)e({provider:r.data.payload.name}),c.close();else if(r.data.action==="skip_callback"+n){var s=r.data.payload.redirectURL;s&&(window.location.href=s),c.close()}else{c.close();var l={code:p.CONNECT_UNKNOWN_SDK_MESSAGE,reason:S(JSON.stringify(r.data))};t(l)}else{c.close();var u={code:p.CONNECT_DOMAIN_NOT_ALLOWED,reason:v(r.origin)};t(u)}}window.addEventListener("message",i)}))})),l(this,"redirectAuth",(function(e){var t=_(),n=d({redirect_uri:e.url,uuid:t},H(e,["screen","source"])),o=F(null==e?void 0:e.action);o&&(n.action=o),(null==e?void 0:e.state)&&(n.redirect_state=e.state);var i=M(n);location.assign(i)}))},ee=new(function(){function e(){a(this,e),l(this,"savedStyles",[]),l(this,"bodyScrollYValue",0),l(this,"isFreezed",!1)}return c(e,[{key:"freezeBodyOverflow",value:function(){if(!this.isFreezed){this.isFreezed=!0;var e=(n=window.document.documentElement.clientWidth,Math.abs(window.innerWidth-n)),t=parseInt(window.getComputedStyle(window.document.body).paddingRight,10)||0;this.bodyScrollYValue=window.pageYOffset||window.scrollY,this.savedStyles=[],this.savedStyles.push({value:window.document.body.style.paddingRight,property:"padding-right"},{value:window.document.body.style.overflow,property:"overflow"},{value:window.document.body.style.overflowX,property:"overflow-x"},{value:window.document.body.style.overflowY,property:"overflow-y"}),window.document.body.style.setProperty("overflow","hidden"),window.document.body.style.setProperty("padding-right","".concat(e+t,"px"))}var n}},{key:"restoreBodyOverflow",value:function(){this.isFreezed&&(this.savedStyles.forEach((function(e){var t=e.value,n=e.property;t?window.document.body.style.setProperty(n,t):window.document.body.style.removeProperty(n)})),window.scrollTo(0,this.bodyScrollYValue),this.isFreezed=!1)}}]),e}());!function(e){e.APP_CLOSE="VKWebAppClose",e.APP_READY="VKSDKMiniAppReady",e.RESIZE="VKSDKMiniAppResize",e.APP_INIT_CONFIG="VKSDKMiniAppInitConfig",e.OPEN_APP="VKWebAppOpenApp",e.OPEN_PAY_FORM="VKWebAppOpenPayForm",e.ACTION_DONE="VKWebAppActionDone",e.SET_TITLE="VKWebAppSetTitle"}(Z||(Z={})),function(e){e.OPEN="open",e.HIDE="hide",e.CLOSE="close",e.SHOW="show",e.MESSAGE="message",e.CREATE_APP="createapp"}($||($={})),function(e){e.SUPERAPP_TOKEN="VKSDKGeneralSuperAppToken",e.AUTH_NEEDED="VKSDKGeneralAuthNeeded",e.OPEN_APP="VKSDKGeneralOpenApp"}(X||(X={}));var te,ne=function e(t){var n=this;a(this,e),l(this,"events",void 0),l(this,"iframe",void 0),l(this,"bridge",void 0),l(this,"loading",void 0),l(this,"readyPromiseResolve",null),l(this,"readyPromise",null),l(this,"params",void 0),l(this,"child",null),l(this,"initialTitle",window.document.title),l(this,"open",(function(e,t){return n.loading?(n.iframe.src=n.getMiniAppUrl(e,t),n.loading=new Promise((function(e){n.iframe.onload=function(){n.iframe.onload=null,e()}})),n.readyPromise=new Promise((function(e){return n.readyPromiseResolve=e}))):n.preload(e,t).catch(console.error),n.iframe.style.display="block",n.params.stackMode||ee.freezeBodyOverflow(),n.loading.then(n.handleResize).catch(console.error),n.events.emit($.OPEN),n.readyPromise})),l(this,"hide",(function(){n.iframe.style.display="none",n.params.stackMode||ee.restoreBodyOverflow(),n.events.emit($.HIDE)})),l(this,"close",(function(){window.document.title!==n.initialTitle&&(window.document.title=n.initialTitle),n.params.stackMode||ee.restoreBodyOverflow(),k.events.off("superAppToken",n.onSuperAppToken),n.iframe&&n.iframe.remove(),n.bridge&&n.bridge.destroy(),delete n.iframe,delete n.bridge,window.removeEventListener("resize",n.handleResize),n.events.emit($.CLOSE)})),l(this,"show",(function(){if(!n.loading)throw new Error('App is not loaded, use "open" or "preload" methods');n.iframe.style.display="block",n.params.stackMode||ee.freezeBodyOverflow(),n.events.emit($.SHOW)})),l(this,"preload",(function(e,t){var o=document.createElement("iframe"),i=window.innerHeight,r=isFinite(n.params.zIndex)?n.params.zIndex:999999;return o.src=n.getMiniAppUrl(e,t),o.setAttribute("allow","geolocation"),o.style.cssText="\n      display: none;\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: ".concat(i,"px;\n      min-height: ").concat(i,"px;\n      border: none;\n      z-index: ").concat(r,";\n    "),n.iframe=o,document.body.appendChild(n.iframe),k.events.on("superAppToken",n.onSuperAppToken),n.bridge=new q({iframe:n.iframe,origin:"https://"+k.get().connectDomain}),n.bridge.onMessage(n.handleMessage),window.addEventListener("resize",n.handleResize),n.loading=new Promise((function(e){o.onload=function(){o.onload=null,e()}})),n.readyPromise=new Promise((function(e){return n.readyPromiseResolve=e})),n.loading})),l(this,"sendMessage",(function(e){n.bridge.sendMessage(e)})),l(this,"onSuperAppToken",(function(e){n.bridge.sendMessage({handler:X.SUPERAPP_TOKEN,params:{result:e}})})),l(this,"handleMessage",(function(e){switch(e.handler){case Z.APP_CLOSE:n.hide();break;case Z.APP_READY:n.resolveReadyPromise(),n.handleUpdateConfig();break;case Z.OPEN_APP:n.openMiniapp(e.params);break;case Z.OPEN_PAY_FORM:n.openPayForm(e.params);break;case Z.SET_TITLE:n.setTitle(e.params);break;case X.SUPERAPP_TOKEN:k._requestSuperAppToken();break;case X.AUTH_NEEDED:k._requestAuth();break;default:n.events.emit($.MESSAGE,e)}})),l(this,"handleResize",(function(){if(n.iframe){var e=innerWidth,t=innerHeight;n.iframe.style.height="".concat(t,"px"),n.iframe.style.minHeight="".concat(t,"px"),n.bridge.sendMessage({handler:Z.RESIZE,params:{viewport_width:e,viewport_height:t}})}})),l(this,"handleUpdateConfig",(function(){n.bridge.sendMessage({handler:Z.APP_INIT_CONFIG,params:{fullMode:n.params.fullMode,hideMenu:n.params.hideMenu}})})),l(this,"getMiniAppUrl",(function(e,t){var o=k.get(),i=o.connectDomain,r=o.appId,a=o.superAppToken,s=o._debug,c=O({app:n.params.app,host_app_id:r,debug:s?"1":"",localhost:s?"1":"",superapp_token:a,app_query:e?JSON.stringify(e):"",app_hash:t||""});return"https://".concat(i,"/mini_app?").concat(c)})),l(this,"resolveReadyPromise",(function(){n.readyPromise&&n.readyPromiseResolve&&(n.readyPromiseResolve(),n.readyPromise=null,n.readyPromiseResolve=null)})),l(this,"openMiniapp",(function(t){n.child=new e({app:t.app_id,stackMode:n.params.stackMode}),n.events.emit($.CREATE_APP,{app:n.child,location:t.location})})),l(this,"openPayForm",(function(t){var o=d({},t.params);o.data&&(o.data=JSON.stringify(o.data));var i=d({},o,{app_id:t.app_id,action:t.action}),r=new e({app:6217559,stackMode:n.params.stackMode});r.open(i).then((function(){return n.hide()})).catch(console.error),r.events.on($.MESSAGE,(function(e){n.handleVKPayFormMessage(e),r.close(),n.show()})),r.events.on($.HIDE,(function(){r.close(),n.close()}))})),l(this,"setTitle",(function(e){window.document.title=e.title})),l(this,"handleVKPayFormMessage",(function(e){e.handler===Z.ACTION_DONE&&n.sendMessage(e)})),this.params=d({},t,{app:"number"==typeof t.app?"app".concat(t.app):t.app}),this.events=b()};!function(){function e(){a(this,e),l(this,"stack",[])}c(e,[{key:"removeMiniApp",value:function(e){var t=e.app,n=this.stack.lastIndexOf(t);if(n>-1&&n===this.stack.length-1)if(this.stack.splice(n,1),this.stack.length){this.stack[this.stack.length-1].show();var o=this.stack[this.stack.length-2];setTimeout((function(){return null==o?void 0:o.hide()}),0)}else ee.restoreBodyOverflow()}},{key:"makeHandleMiniAppClose",value:function(e){var t=this,n=e.app;return function(){t.removeMiniApp({app:n})}}},{key:"makeHandleMiniAppHide",value:function(e){var t=this,n=e.app;return function(){var e=t.stack.lastIndexOf(n);e>-1&&e===t.stack.length-1&&setTimeout((function(){return n.close()}),0)}}},{key:"handleMiniAppCreate",value:function(e){var t=e.app,n=e.query,o=e.hash;this.stack.push(t),t.open(n,o).catch(console.error),t.events.on($.CREATE_APP,this.handleMiniAppCreate.bind(this)),t.events.on($.HIDE,this.makeHandleMiniAppHide({app:t})),t.events.on($.CLOSE,this.makeHandleMiniAppClose({app:t})),ee.freezeBodyOverflow();var i=this.stack[this.stack.length-2];return setTimeout((function(){null==i||i.hide()}),0),t}},{key:"open",value:function(e){var t=e.app,n=e.query,o=e.hash,i=new ne({app:t,stackMode:!0});return this.handleMiniAppCreate({app:i,query:n,hash:o}),i}},{key:"close",value:function(){var e=this.stack;this.stack.splice(0),e.reverse().forEach((function(e){return e.close()})),ee.restoreBodyOverflow()}},{key:"length",get:function(){return this.stack.length}}])}();!function(e){e.STATIC_MAP="VKSDKRequestToGeoservice:staticmap/png/",e.SEARCH="VKSDKRequestToGeoservice:search",e.OVERALL="VKSDKRequestToGeoservice:overall",e.DIRECTIONS="VKSDKRequestToGeoservice:directions",e.ISO="VKSDKRequestToGeoservice:iso"}(te||(te={}));!function(){function e(t){var n=this,o=t.apiKey;a(this,e),l(this,"iframe",void 0),l(this,"bridge",void 0),l(this,"requestMap",void 0),l(this,"apiKey",void 0),this.apiKey=o;var i=document.createElement("iframe"),r=k.get().appId;i.src=this.getGeoserviceProxyUrl({app_id:r}),i.style.cssText="\n      display: none;\n    ",this.iframe=i,document.body.appendChild(this.iframe),this.bridge=new q({iframe:this.iframe,origin:"https://"+k.get().connectDomain}),this.requestMap={},this.bridge.onMessage((function(e){var t=e.params,o=t.requestID,i=t.response;n.requestMap[o].resolve(i),delete n.requestMap[o]}))}c(e,[{key:"setApiKey",value:function(e){this.apiKey=e}},{key:"getGeoserviceProxyUrl",value:function(e){var t=k.get(),n=t.connectDomain,o=t._debug,i=d({},e||{},{origin:location.protocol+"//"+location.host,localhost:String(location.host.includes("localhost")),debug:location.host.includes("localhost")?1:String(o)});return"https://".concat(n,"/geoservice?").concat(O(i))}},{key:"prepareAnswer",value:function(e,t,n){var o=this,i=_();return this.bridge.sendMessage({handler:"VKSDKRequestToGeoservice:".concat(e),params:d({},t,{api_key:this.apiKey,wrapRequestInJSON:n,requestID:i})}),new Promise((function(e,t){o.requestMap[i]={resolve:e,reject:t}}))}},{key:"getStaticMap",value:function(e){return this.prepareAnswer("staticmap/png/",e)}},{key:"encodeCoords",value:function(e){return this.prepareAnswer("search",e)}},{key:"decodeCoords",value:function(e){return this.prepareAnswer("overall",e)}},{key:"getDirections",value:function(e){return this.prepareAnswer("directions",e,!0)}},{key:"getISO",value:function(e){return this.prepareAnswer("iso",e,!0)}}])}()},867535:(e,t,n)=>{var o=n(61548);window.Join=o.join;try{stManager.done(jsc("web/join.js"))}catch(e){}},61548:(e,t,n)=>{n.d(t,{join:()=>w});n(991181),n(579665),n(95767),n(530522),n(175115),n(66108),n(296253),n(283946),n(21466),n(59357);var o=n(206566),i=n(190148),r=n(927663),a=n(414914),s=n(705456),c=n(442699),l=n(917685),u=n(791563),d=n(621260),p=n(116886),h=n(719016),g=n(919369),_=n(506362),m=n(382419),v=n(151107),S=n(496446),E=n(209152);function f(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i,r=!0,a=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return r=e.done,e},e:function(e){a=!0,i=e},f:function(){try{r||null==o.return||o.return()}finally{if(a)throw i}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function T(e,t){cur[`${e}IsDirty`]||(cur[`${e}IsDirty`]=!0,t())}function R(){var e;(null===(e=cur)||void 0===e?void 0:e.fbSign)&&g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.FACEBOOK_REGISTRATION,g.EventFieldValues.REGISTERED_VIA_FB)}function O(){var e,t=(0,a.ge)("join_phone");t&&g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.PHONE_NUMBER,t.value,!0),(null===(e=cur)||void 0===e?void 0:e.uiPhoneCountry)&&g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.PHONE_COUNTRY,cur.uiPhoneCountry.val(),!0)}var w={show(e){(0,a.isVisible)(e)||(0,i.slideDown)(e,150)},hide(e){(0,a.isVisible)(e)&&(0,i.slideUp)(e,150)},scrollnode:()=>o.browser.msie6?pageNode:window,scrollResize(e,t){if(!o.browser.mobile||o.browser.safari_mobile){var n=(0,r.scrollGetY)();!0===t&&(cur.nextButtonTop=(0,a.getXY)(cur.nextButtonWrap)[1],o.browser.msie6&&(cur.nextButtonTop+=n));var i=cur.resultShown&&n+lastWindowHeight<cur.nextButtonTop+cur.nextButtonHeight+(0,c.intval)((0,a.getStyle)("content","marginTop"))+(0,a.ge)("page_header_cont").offsetHeight-8;i&&!cur.docked?((0,a.addClass)(cur.nextButton,"fixed"),o.browser.msie6&&(bodyNode.appendChild(cur.nextButton),e={type:"resize"}),cur.docked=!0):!i&&cur.docked&&((0,a.removeClass)(cur.nextButton,"fixed"),o.browser.msie6&&cur.nextButtonWrap.appendChild(cur.nextButton),cur.docked=!1),cur.docked&&e&&"resize"===e.type&&(o.browser.msie6?cur.nextButton.style.left=(0,a.getXY)((0,a.ge)("content"))[0]+"px":(cur.nextButton.style.left=(0,a.ge)("page_layout").offsetLeft+(0,a.ge)("content").offsetLeft+"px",setTimeout(w.nextResetStyle,0)))}},nextResetStyle(){cur.nextButton.style.left=""},initScroll(){(0,c.extend)(cur,{nextButton:(0,a.ge)("join_"+cur.section+"_next"),nextButtonWrap:(0,a.ge)("join_"+cur.section+"_next_wrap"),resultEl:(0,a.ge)("join_"+cur.section+"_result")}),cur.nextButtonHeight=(0,a.getSize)(cur.nextButton)[1],cur.nextButtonWrap.style.height=cur.nextButtonHeight+"px",cur.resultShown=(0,a.isVisible)(cur.resultEl),w.scrollResize(!1,!0),(0,l.addEvent)(w.scrollnode(),"scroll",w.scrollResize),(0,l.addEvent)(window,"resize",w.scrollResize),cur.destroy.push((e=>{(0,l.removeEvent)(w.scrollnode(),"scroll",w.scrollResize),(0,l.removeEvent)(window,"resize",w.scrollResize),o.browser.msie6&&e.nextButtonWrap.appendChild(e.nextButton)}))},initStatsPhoneVerify(){var e=(0,a.ge)("join_called_phone"),t=(0,a.ge)("join_called_code"),n=(0,a.ge)("join_code"),o=()=>{cur.isCalledPhoneElDirty||(g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.INPUT_CODE_INTERACTION,cur.eventScreen),cur.isCalledPhoneElDirty=!0)};O(),g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.SMS_CODE,n.value,!0),cur.statsPhoneVerifyInited||(e.addEventListener("keyup",(()=>{g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.SMS_CODE,e.value),o()})),t.addEventListener("keyup",(()=>{g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.SMS_CODE,t.value),o()})),n.addEventListener("keyup",(()=>{g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.SMS_CODE,n.value),o()})),cur.statsPhoneVerifyInited=!0)},initStatsPhone(){var e=(0,a.ge)("join_phone");g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.PHONE_NUMBER,e.value,!0),cur.statsPhoneInited||(e.addEventListener("keyup",(()=>{g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.PHONE_NUMBER,e.value),cur.isPhoneElDirty||(g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.INPUT_NUMBER_INTERACTION,cur.eventScreen),cur.isPhoneElDirty=!0)})),cur.statsPhoneInited=!0)},initStatsPassword(){var e=(0,a.ge)("join_pass");g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.PASSWORD,e.value,!0),cur.statsPasswordInited||(e.addEventListener("keyup",(()=>{g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.PASSWORD,e.value)})),cur.statsPasswordInited=!0)},initStatsRules(){var e=(0,a.ge)("join_accept_terms_checkbox");g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.RULES_ACCEPT,w.policyChecked()+"",!0),cur.statsRulesInited||(e.addEventListener("click",(()=>{g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.RULES_ACCEPT,w.policyChecked()+"")})),cur.statsRulesInited=!0)},initStats(){cur.eventScreen=g.EventScreens.REGISTRATION_PHONE,((0,a.isVisible)("join_code_row")||(0,a.isVisible)("join_called_phone_row")||(0,a.isVisible)("join_called_code_row"))&&(cur.eventScreen=g.EventScreens.REGISTRATION_PHONE_VERIFY),(0,a.isVisible)("join_pass_row")&&(cur.eventScreen=g.EventScreens.REGISTRATION_PASSWORD),"done"===nav.objLoc.act&&(cur.eventScreen=g.EventScreens.REGISTRATION_COMPLETE),"contacts"===nav.objLoc.act&&(cur.eventScreen=g.EventScreens.REGISTRATION_COUNTRY),"education"===nav.objLoc.act&&(cur.eventScreen=g.EventScreens.REGISTRATION_EDUCATION),"email"===nav.objLoc.act&&(cur.eventScreen=g.EventScreens.REGISTRATION_EMAIL),cur.eventScreen===g.EventScreens.REGISTRATION_PHONE&&(w.initStatsPhone(),w.initStatsRules()),cur.eventScreen===g.EventScreens.REGISTRATION_PHONE_VERIFY&&(w.initStatsPhoneVerify(),w.initStatsRules()),cur.eventScreen===g.EventScreens.REGISTRATION_PASSWORD&&(w.initStatsPassword(),w.initStatsRules()),cur.eventScreen===g.EventScreens.REGISTRATION_COUNTRY&&(g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.COUNTRY,`${cur.uiCountry.val()}`,!0),g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.CITY,`${cur.uiCity.val()}`,!0)),cur.eventScreen===g.EventScreens.REGISTRATION_EDUCATION&&(g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.COUNTRY,`${cur.selData.country_val[0]}`,!0),g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.CITY,`${cur.selData.city_val[0]}`,!0),g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.GRADUATION,"",!0),cur.isSchool?(g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.SCHOOL,"",!0),g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.YEAR_FROM,"",!0),g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.YEAR_TO,"",!0),g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.CLASS,"",!0),g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.SPECIALIZATION,"",!0)):(g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.UNIVERSITY,"",!0),g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.FACULTY,"",!0),g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.CHAIR,"",!0),g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.EDU_FORM,"",!0),g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.EDU_STATUS,"",!0))),cur.eventScreen===g.EventScreens.REGISTRATION_EMAIL&&g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.EMAIL,"",!0)},showProgress(){if((0,a.isVisible)(cur.resultEl)){var e=(0,a.ge)("join_"+cur.section+"_summary");e.lastChild&&(0,a.hasClass)(e.lastChild,"progress_inline")||e.appendChild((0,a.ce)("span",{className:"progress_inline join_summary_prg"}))}else(0,a.show)("join_"+cur.section+"_none_prg"),cur.noneEl.style.visibility="hidden"},hideProgress(){if((0,a.isVisible)(cur.resultEl)){var e=(0,a.ge)("join_"+cur.section+"_summary");e.lastChild&&(0,a.hasClass)(e.lastChild,"progress_inline")&&(0,a.re)(e.lastChild)}else cur.noneEl.style.visibility="",(0,a.hide)("join_"+cur.section+"_none_prg")},addFriendLogged:function(e,t,n){T(g.RegistrationFieldItemNames.FRIEND_ASK,(function(){g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.FRIEND_ASK,"1"),g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.FIRST_FRIEND_ASK,g.EventScreens.REGISTRATION_LIST_FRIENDS_FACEBOOK,void 0,{force:!0})})),ajax.post("al_friends.php",{act:"add",mid:t,hash:n,from:"fb_sign"},{onDone:()=>{(0,a.hide)("join_add"+t),(0,a.show)("join_request"+t)},showProgress:s.lockButton.pbind(e),hideProgress:s.unlockButton.pbind(e)})},removeFriendLogged:function(e,t,n){ajax.post("al_friends.php",{act:"remove",mid:t,hash:n,from:"fb_sign"},{onDone:()=>{(0,a.show)("join_add"+t),(0,a.hide)("join_request"+t)},showProgress:s.lockButton.pbind(e),hideProgress:s.unlockButton.pbind(e)})},isPhoneCall(){var e=parseInt(cur.validationType,10);return 3===e||4===e},isPhoneCallStrict:()=>3===parseInt(cur.validationType,10),phoneDone:function(e,t){if(e){var n=(0,a.ge)("join_phone");cur.uiPhoneCountry&&cur.uiPhoneCountry.val(t,!0),(0,a.val)(n,e),n.readOnly=!0,cur.uiPhoneCountry&&(cur.uiPhoneCountry.disable(!0),(0,a.addClass)("join_phone_prefixed","join_readonly_wrap")),(0,a.addClass)(n,"join_readonly")}cur.resendInt&&clearInterval(cur.resendInt),cur.resendInt=setInterval(w.resendUpdate,1e3),(0,a.show)("join_code_submit","join_other_phone","join_resend"),(0,a.hide)("join_phone_submit"),w.isPhoneCall()?((0,a.val)((0,a.ge)("join_called_phone_prefix").firstChild,""),(0,a.val)("join_called_phone",""),(0,a.hide)("join_code_row"),(0,a.hide)("join_called_code_row"),(0,i.slideDown)("join_called_phone_row",150,a.elfocus.pbind("join_called_phone"))):(0,a.isVisible)("join_called_phone_row")||(0,a.isVisible)("join_called_code_row")?((0,a.hide)("join_called_phone_row"),(0,a.show)("join_code_row"),setTimeout(a.elfocus.pbind("join_code"),100)):(0,i.slideDown)("join_code_row",150,a.elfocus.pbind("join_code")),(0,a.val)("join_submit_result",""),(0,a.val)("join_code",""),w.initPhoneCode()},checkStatus:function(e,t){var n=(0,d.curBox)(),o=n?n.showProgress:s.lockButton.pbind("join_send_phone"),i=n?n.hideProgress:s.unlockButton.pbind("join_send_phone");if(cur.checkingStatus){if(cur.checkingStatus<0)o(),cur.checkingStatus=1;else if(++cur.checkingStatus,cur.checkingStatus>4)return cur.checkingStatus=-1,i(),w.phoneDone(e,t)}else o(),cur.checkingStatus=1,cur.destroy.push((function(){clearTimeout(cur.checkingTimer),i()}));cur.checkingTimer=setTimeout(ajax.post("join.php",{act:"phone_check"},{onDone:n=>{if(n||cur.checkingStatus>3)return cur.checkingStatus=-1,i(),w.phoneDone(e,t);cur.checkingTimer=setTimeout(w.checkStatus.pbind(e,t),2e3)},onFail:n=>(cur.checkingStatus=-1,i(),n?(w.showMsg("join_submit_result",n,a.elfocus.pbind("join_phone")),!0):w.phoneDone(e,t))}),1e3)},submitPhone:e=>{if(e||!(0,s.isButtonLocked)("join_send_phone"))if(w.policyChecked()){var t=(0,a.ge)("join_phone"),n=w.getPhone(),o=(0,a.val)("join_phone"),i=!!cur.uiPhoneCountry&&cur.uiPhoneCountry.val_full();if(t.disabled)return(0,a.elfocus)("join_code");ajax.post("join.php",{act:"phone",phone:n,hash:cur.hash},{showProgress:s.lockButton.pbind("join_send_phone"),hideProgress:s.unlockButton.pbind("join_send_phone"),onDone:(e,t,n,r,c)=>{if(e)return(0,s.lockButton)("join_send_phone"),void setTimeout(w.submitPhone.pbind(!0),1e3);if(cur.strongCode!==n){var l=(0,a.ge)("join_code").tt;l&&l.destroy(),cur.strongCode=n}cur.validationType=c,cur.resendDelay=r,w.phoneDone(o,i),w.resendUpdate();var u=(0,a.isVisible)("join_code_submit")?g.EventScreens.REGISTRATION_PHONE:cur.eventScreen;R(),g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.SCREEN_PROCEED,null!=u?u:g.EventScreens.REGISTRATION_PHONE,g.EventScreens.REGISTRATION_PHONE_VERIFY);var d=cur.uiPhoneCountry.val();String(cur.defCountry)!==String(d)&&(g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.SELECT_COUNTRY_NAME,d),g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.PROCEED_OTHER_COUNTRY_CODE,cur.eventScreen)),w.initStats()},onFail:e=>{if(e){var t=(0,a.ge)("join_phone");return t&&t.tt&&t.tt.hide&&t.tt.hide({fasthide:!0}),w.showMsg("join_submit_result",e,a.elfocus.pbind("join_phone")),!0}}})}else(0,s.notaBene)("join_accept_terms_checkbox")},getStrength(e){var t=-1,n=["qwerty","йцукен","gfhjkm","пароль","password","abc123","fuckyou","123abc","baseball","football","soccer","monkey","liverpool","princess","jordan","slipknot","superman","iloveyou"];if(e!==e.replace(/\s/g,"")&&((0,a.val)("join_pass",e=e.replace(/\s/g,"")),(0,a.elfocus)("join_pass")),e.length<6)t=0;else if(e.match(/^\d+$/)||indexOf(n,e)>=0||e.substr(-1).match(/\d/)&&n.indexOf(e.substr(0,e.length-1))>=0)t=1;else{for(var o=[/[^a-z]/g,/[^A-Z]/g,/[^а-яё]/g,new RegExp("[^А-ЯЁ]","g"),/[^0-9]/g,new RegExp("[a-zA-Zа-яА-ЯёЁ0-9]","g")],i=[],r=0,s=0,l=o.length;s<l;++s){var u=e.replace(o[s],"").length;u&&(u>1&&++r,i.push({group:s,cnt:u}))}if(i.length<3&&parseInt(i[i.length-1].group,10)!==o.length-1&&r<2&&(t=2),(r>2||i.length>2&&parseInt(i[i.length-1].group,10)===o.length-1)&&(t=4),t<0&&r>1){var d=e.replace(o[o.length-1],"");d.length>1&&d.replace(new RegExp((0,c.escapeRE)(d.charAt(0)),"g"),"").length&&(t=4)}t<0&&(t=3),t&&t<3&&e.length>13&&++t}return t},updateStrength(){var e=(0,a.val)("join_pass"),t=w.getStrength(e);(0,a.ge)("join_about_pass").className="join_pwd_level"+t,(0,a.ge)("join_pass_strength").innerHTML=e?(0,p.getLang)("join_pwd_level"+t):(0,p.getLang)("join_pwd_min_length"),setQuickLoginData(cur.fbSign&&cur.fbValid?cur.fbEmail:w.getPhone(),e,{params:cur.joinParams})},initPhoneCode(){cur.codeForm||(setQuickLoginData(w.getPhone(),"",{params:cur.joinParams}),utilsNode.appendChild((0,a.ce)("div",{innerHTML:`\n<form method="POST" action="${vk.loginscheme}://${cur.loginHost}/?act=check_code&_origin=${locProtocol}//${locHost}" id="join_code_form" name="join_code_form" target="join_code_frame">\n  <input type="hidden" name="email" id="join_code_phone" />\n  <input type="hidden" name="code" id="join_code_code" />\n  <input type="hidden" name="call" id="join_code_call" />\n  <input type="hidden" name="recaptcha" id="join_code_recaptcha" />\n  <input type="hidden" name="captcha_sid" id="join_code_sid" />\n  <input type="hidden" name="captcha_key" id="join_code_key" />\n</form>\n<iframe id="join_code_frame" name="join_code_frame"></iframe>\n`})),cur.codeForm=(0,a.ge)("join_code_form"),cur.codeFrame=(0,a.ge)("join_code_frame"))},validatePaste:e=>{var t=(e||window).clipboardData.getData("Text").replace(/[^0-9]/g,""),n=(0,a.ge)("join_phone"),o=(0,a.ge)("join_phone_prefix").firstChild;if(!(t.length<11)){var i=t.slice(0,2);89!=i&&87!=i||(t="7"+t.slice(1));var r,s=f(cur.countries);try{for(s.s();!(r=s.n()).done;){var c=r.value,l=c[3].slice(1),u=l.length;if(t.slice(0,u)===l)return cur.uiPhoneCountry.val(c[0]),(0,a.val)(o,c[3].toString()),(0,a.val)(n,t.slice(u)),cancelEvent(e)}}catch(e){s.e(e)}finally{s.f()}}},initPhoneCountry:function(e,t){cur.countries=e,cur.defCountry=t;var n=(0,a.ge)("join_phone_country"),o=!!+n.dataset.vkConnectIntegration;cur.uiPhoneCountry=new Dropdown(n,cur.countries,{selectedItems:t,big_text:!0,disablePlaceholder:!0,liteEventsBind:!0,autocomplete:!0,multiselect:!1,onShow:function(){g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.SELECT_COUNTRY,cur.eventScreen)},onChange:function(e){var t=(0,a.ge)("join_phone"),n=(0,a.ge)("join_phone_prefix").firstChild,i=cur.uiPhoneCountry.val_full()[3];if(t.readOnly||0===e||"0"===e||""===e||!1===e||void 0===e){var r=(0,a.val)(n);if(i==r)return;for(var s=0,c=cur.countries.length;s<c;++s)if(cur.countries[s][3]==r)return cur.uiPhoneCountry.val(cur.countries[s]);return cur.uiPhoneCountry.val(cur.defCountry,!0)}(0,a.val)(n,i),o||w.updatePolicyLink(cur.uiPhoneCountry.val()),g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.SELECT_COUNTRY_NAME,cur.uiPhoneCountry.val()),g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.SELECT_COUNTRY_DONE,cur.eventScreen),g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.PHONE_COUNTRY,cur.uiPhoneCountry.val())}}),(0,a.ge)("join_phone").readOnly?cur.uiPhoneCountry.disable(!0):g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.PHONE_COUNTRY,cur.uiPhoneCountry.val(),!0),cur.destroy.push(cur.uiPhoneCountry.destroy.bind(cur.uiPhoneCountry))},getPhone(){var e=(0,c.trim)((0,a.val)("join_phone"));return(0,c.trim)((0,a.val)(((0,a.ge)("join_phone_prefix")||{}).firstChild)||"")+e},submitPhoneCode(){if(cur.codeForm&&!(0,s.isButtonLocked)("join_send_code"))if(w.policyChecked()){var e,t,n;w.isPhoneCall()?(e="join_called_phone",t="join_called_phone_prefixed",n=cur.calledPhoneLen):(t=e="join_code",n=5);var o=(0,c.trim)((0,a.val)(e)).replace(/[^a-z0-9]/g,"");if(o.length<n)return(0,s.notaBene)(t);if("05937"===o)return w.showMsg("join_submit_result",(0,p.getLang)("join_sorry_code"),a.elfocus.pbind("join_code",!1,!1));(0,a.val)("join_code_phone",w.getPhone()),(0,a.val)("join_code_code",o),w.isPhoneCall()&&(0,a.val)("join_code_call",vk.id?-vk.id:getCookie("remixnreg_sid")),(0,s.lockButton)("join_send_code"),cur.codeForm.submit()}else(0,s.notaBene)("join_accept_terms_checkbox")},policyChecked(){var e=(0,a.geByClass1)("checkbox","join_accept_terms_checkbox");return(0,s.isChecked)(e)},togglePhoneSubmit(){var e=w.policyChecked();(0,s.disableButton)((0,a.ge)("join_send_phone"),!e),(0,s.disableButton)((0,a.ge)("join_send_code"),!e),(0,s.disableButton)((0,a.ge)("join_send_pass"),!e)},askPassword(e,t){(0,d.curBox)()&&(0,d.curBox)().hide(),cur.sureBoxText=t,(0,s.unlockButton)("join_send_code"),(0,a.val)("join_code",(0,a.val)("join_code_code"));var n=cur.joinParams&&cur.joinParams.facebook;cur.joinParams={join_code:(0,a.val)("join_code"),join_hash:e},n&&(cur.joinParams.facebook=1),w.isPhoneCall()?((0,a.ge)("join_called_phone").readOnly=!0,(0,a.addClass)((0,a.ge)("join_called_phone"),"join_readonly"),(0,a.addClass)((0,a.ge)("join_called_phone_prefixed"),"join_readonly_wrap")):((0,a.ge)("join_code").readOnly=!0,(0,a.addClass)((0,a.ge)("join_code"),"join_readonly")),(0,a.show)("join_pass_submit"),(0,a.hide)("join_other_phone","join_code_submit","join_resend","join_country_row"),(0,i.slideDown)("join_pass_row",150,a.elfocus.pbind("join_pass")),(0,a.val)("join_submit_result",""),R(),O(),g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.SCREEN_PROCEED,cur.eventScreen,g.EventScreens.REGISTRATION_PASSWORD),w.initStats()},askCaptcha(e,t,n){cur.codeForm&&((0,s.unlockButton)("join_send_code"),2===parseInt(t,10)?window.badCodeBox=(0,u.showReCaptchaBox)(e,n,window.badCodeBox,{onSubmit:(e,t)=>{(0,a.val)("join_code_recaptcha",e),cur.codeForm.submit()},onHide:()=>{window.badCodeBox=!1}}):window.badCodeBox=(0,u.showCaptchaBox)(e,n,window.badCodeBox,{onSubmit:(e,t)=>{(0,a.val)("join_code_sid",e),(0,a.val)("join_code_key",t),cur.codeForm.submit()},onHide:()=>{window.badCodeBox=!1}}))},submitPasswordSure(){(0,u.showFastBox)((0,p.getLang)("join_new_page_sure_title"),(0,p.getLang)("join_new_page_sure"),(0,p.getLang)("join_new_page_sure_submit"),w.submitPassword.pbind(-1),(0,p.getLang)("global_cancel"))},submitPassword(e,t){if(!(0,s.isButtonLocked)("join_send_pass")||cur.submitOnSign)if(w.policyChecked()){var n;if(!0===t)n="000000";else if((n=(0,a.val)("join_pass")).length<6||w.getStrength(n)<3)return(0,s.notaBene)("join_pass");if(cur.sureBoxText&&1!==e&&-1!==e)(0,u.showFastBox)({title:(0,p.getLang)("join_sure_detach"),hideButtons:!0,width:560,noCloseButton:!0},cur.sureBoxText).changed=!0;else{if(cur.joinParams.join_to_already=(0,c.intval)(e),cur.fbSign&&!cur.fbSigned)return cur.submitOnSign=1,(0,s.lockButton)("join_send_pass");var o;window._oldOnLoginFailed||(window._oldOnLoginFailed=window.onLoginFailed,window._oldOnLoginDone=window.onLoginDone,cur.destroy.push((()=>{window.onLoginFailed=window._oldOnLoginFailed,window.onLoginDone=window._oldOnLoginDone,window._oldOnLoginFailed=!1,window._oldOnLoginDone=!1}))),window.onLoginFailed=(e,t)=>{(0,E.joinLogProgress)(S.JoinProgressLog.SCREEN_FINISH,S.JoinProgressLog.STATUS_ERROR,S.JoinProgressLog.ERROR_PASSWORD),g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.INCORRECT_PASSWORD,cur.eventScreen),-1===e?location.href=location.href.replace(/^http:/,"https:"):4===e?location.href="/login?m=1&email="+t.email:7===e?location.href="/join?act=finish&m=1":10===e?((0,s.lockButton)("join_send_pass"),setTimeout(submitQuickLoginForm.pbind(o,n,{prg:"join_send_pass",params:cur.joinParams}),1e3)):nav.reload()},window.onLoginDone=nav.go.pbind("join?act=done"),cur.fbSign&&(cur.fbValid||!0===t)?(o=cur.fbEmail,cur.joinParams.fb_id=cur.fbId):(o=w.getPhone(),R(),g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.SCREEN_PROCEED,cur.eventScreen,g.EventScreens.REGISTRATION_COMPLETE)),submitQuickLoginForm(o,n,{prg:"join_send_pass",params:cur.joinParams})}}else(0,s.notaBene)("join_accept_terms_checkbox")},showMsg(e,t,n,o){var i=(0,a.ge)(e);showMsg(i,t,o||"error",!0),(0,c.isFunction)(n)&&n()},codeFailed(e,t){(0,d.curBox)()&&(0,d.curBox)().hide(),(0,s.unlockButton)("join_send_code");var n,o=(0,p.getLang)("join_wrong_code");(e=(0,c.intval)(e))<0?(o=(0,p.getLang)("join_code_failed"),w.changePhone()):e&&e<6&&(o+="<br>"+(0,p.getLang)("join_tries_left").replace("{count}","<b>"+e+"</b>")),w.isPhoneCall()&&(0,a.isVisible)("join_called_phone_prefix")?(n="join_called_phone",(0,a.val)((0,a.ge)("join_called_phone_prefix").firstChild,t)):n="join_code",w.showMsg("join_submit_result",o,a.elfocus.pbind(n)),g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.INCORRECT_SMS_CODE,cur.eventScreen),window._oldOnLoginFailed&&(window.onLoginFailed=window._oldOnLoginFailed)},resendUpdate(){var e,t;w.isPhoneCallStrict()?(e="join_send_code_sms_time",t="join_send_code_sms"):(e="join_resend_sms_time",t="join_no_sms"),cur.resendDelay>0?((0,a.val)("join_resend",(0,p.getLang)(e).replace("%s",Math.floor(cur.resendDelay/60)+":"+(cur.resendDelay%60<10?"0":"")+cur.resendDelay%60)),cur.resendDelay--):-1===parseInt(cur.resendDelay,10)?((0,a.val)("join_resend",""),clearInterval(cur.resendInt)):((0,a.val)("join_resend",'<a id="join_resend_lnk" onclick="return Join.noCode()">'+(0,p.getLang)(t)+"</a>"),clearInterval(cur.resendInt))},noCode(){var e=(0,a.ce)("span",{className:"progress_inline"}),t=(0,a.ge)("join_resend_lnk"),n=t.parentNode;return ajax.post("join.php",{act:"resend",hash:cur.hash},{showProgress:()=>{t.parentNode===n&&n.replaceChild(e,t)},hideProgress:()=>{e.parentNode===n&&n.replaceChild(t,e)},onDone:function(e,t,n,o){1===parseInt(e,10)?(cur.validationType=e,cur.resendDelay=t,w.phoneDone(),g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.RESEND_SMS_CODE,cur.eventScreen)):t&&n?((0,a.val)("join_submit_result",""),(0,u.showFastBox)({title:e,width:450,noCloseButton:!0},t,n,w.call,o).changed=!0,g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.RESEND_SMS_CODE,cur.eventScreen)):t?((0,a.val)("join_submit_result",""),(0,u.showFastBox)({title:e,width:450},t),g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.RESEND_SMS_CODE,cur.eventScreen)):(w.showMsg("join_submit_result",e),g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.RESEND_SMS_CODE_FAILED,cur.eventScreen))}}),!1},changePhone(){var e=(0,a.ge)("join_phone");e.readOnly=!1,(0,a.removeClass)(e,"join_readonly"),cur.uiPhoneCountry&&(cur.uiPhoneCountry.disable(!1),cur.uiPhoneCountry.val(cur.uiPhoneCountry.val(),!0),(0,a.removeClass)("join_phone_prefixed","join_readonly_wrap")),(0,a.show)("join_phone_submit","join_country_row"),(0,a.hide)("join_code_submit","join_other_phone","join_resend"),(0,i.slideUp)(w.isPhoneCall()?"join_called_phone_row":"join_code_row",150),(0,a.val)("join_phone",""),(0,a.elfocus)("join_phone"),g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.SCREEN_RETURN,cur.eventScreen,g.EventScreens.REGISTRATION_PHONE),w.initStats()},call(){ajax.post("join.php",{act:"call",hash:cur.hash},{progress:(0,d.curBox)().progress,onDone:(e,t)=>{(0,d.curBox)().hide(),cur.validationType=t,g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.RESEND_SMS_CODE,cur.eventScreen),w.isPhoneCall()?w.phoneDone():(0,a.elfocus)("join_code"),w.showMsg("join_submit_result",e)}})},tipShow(e,t,n,o){var i=(0,a.ge)(e),r=()=>{(0,h.showTooltip)(i,{text:t,dir:"left",slideX:15,className:"join_finish_tt"+(o?" "+o:""),shift:n,onCreate:l.removeEvent.pbind(e,"mouseout")})};vk.loaded?setTimeout(r,0):(0,l.addEvent)(window,"load",r)},tipHide(){var e=["join_phone","join_code","join_pass","join_called_phone"];e.map((t=>{var n=(0,a.ge)(e[t]);n&&n.tt&&n.tt.hide&&n.tt.hide()}))},phoneTip(e){var t=(0,a.ge)("join_phone"),n=(0,a.getSize)(t);t.readOnly||w.tipShow(t,e,[-(n[0]+10),-Math.floor(n[1]/2)],"join_phone_tt")},passTip(){var e=(0,a.ge)("join_pass"),t=(0,a.getSize)(e);return w.tipShow(e,(0,p.getLang)("join_pass_tip"),[-(t[0]+10),-Math.floor(t[1]/2)])},switchToDefSign(e,t){ajax.post("join.php",{act:"logout",hash:e,noredir:1},{onDone:()=>{(0,u.showBox)("join.php",{act:"box",from:nav.strLoc,nofb:1})},showProgress:s.lockButton.pbind(t),hideProgress:s.unlockButton.pbind(t)})},initContacts(){var e;selectsData.setCountries(cur.selData.countries),selectsData.setCities(cur.selData.country,cur.selData.cities),cur.selData.city_val=cur.selData.city_val||["",""],cur.selData.country_val=cur.selData.country_val||["",""],cur.uiCity=new CitySelect((0,a.ge)("pedit_city"),(0,a.ge)("pedit_city_row"),{progressBar:(0,a.ge)("pedit_progress"),city:cur.selData.city_val,country:cur.selData.country,maxItemsShown:e=>e>6?500:350,onChange:t=>{t!==e&&(e=t,g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.CITY,`${t}`))},dark:1,width:280}),e=(0,c.intval)(cur.uiCity.val()),cur.uiCountry=new CountrySelect((0,a.ge)("pedit_country"),(0,a.ge)("pedit_country_row"),{progressBar:(0,a.ge)("pedit_progress"),country:cur.selData.country_val,citySelect:cur.uiCity,onChange:e=>{g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.COUNTRY,`${e}`),T(g.RegistrationFieldItemNames.PHONE_COUNTRY,(function(){g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.FIRST_COUNTRY,cur.eventScreen)})),w.checkSave(e)},dark:1,width:280}),w.checkSave((0,a.ge)("pedit_country").value),w.initStats()},submitContacts(){var e={act:"check_contacts",hash:cur.saveHash,country:(0,a.ge)("pedit_country").value,city:(0,a.ge)("pedit_city").value};if(!e.country)return(0,E.joinLogProgress)(S.JoinProgressLog.SCREEN_CONTACTS,S.JoinProgressLog.STATUS_ERROR,S.JoinProgressLog.ERROR_EMPTY_CONTACTS),w.showMsg("join_submit_result",(0,p.getLang)("join_need_contacts")),!0;var t=(0,a.ge)("join_save");ajax.post("join.php",e,{onDone:()=>{R(),g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.SCREEN_PROCEED,cur.eventScreen,g.EventScreens.REGISTRATION_EDUCATION),nav.go("/join?act=education")},onFail:e=>(w.showMsg("join_submit_result",e),!0),showProgress:s.lockButton.pbind(t),hideProgress:s.unlockButton.pbind(t)})},initEducation(){selectsData.setCountries(cur.selData.countries),selectsData.setCities(cur.selData.country,cur.selData.cities),cur.selData.city_val=cur.selData.city_val||["",""],cur.selData.country_val=cur.selData.country_val||["",""];var e=(0,a.ge)("edu"),t={id:0,width:280,city:cur.selData.city,city_val:cur.selData.city_val,country:cur.selData.country,country_val:cur.selData.country_val};if(cur.isSchool){var n={school0country:cur.selData.country_val[0],school0city:cur.selData.city_val[0]};e.appendChild(ProfileEditorEdu.genSchoolRow(0)),ProfileEditorEdu.initSchoolRow(t,null,(e=>{T(g.RegistrationFieldItemNames.CLASS,(function(){g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.FIRST_EDUCATION,cur.eventScreen)})),w.checkSave(e)}),(()=>{var e=ProfileEditorEdu.addSchoolParams({},{id:0},"school0");n.school0country!=e.school0country&&g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.COUNTRY,`${e.school0country}`||""),n.school0city!=e.school0city&&g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.CITY,e.school0city||""),n.school0graduation!=e.school0graduation&&g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.GRADUATION,e.school0graduation||""),n.school0school!=e.school0school&&g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.SCHOOL,e.school0school||""),n.school0start!=e.school0start&&g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.YEAR_FROM,e.school0start||""),n.school0finish!=e.school0finish&&g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.YEAR_TO,e.school0finish||""),n.school0class!=e.school0class&&g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.CLASS,e.school0class||""),n.school0custom_spec!=e.school0custom_spec&&g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.SPECIALIZATION,e.school0custom_spec||""),n=e})),w.checkSave((0,a.ge)("s_school0").value),(0,l.addEvent)((0,a.ge)("s_spec0_custom"),"keydown",(function(e){10!=e.keyCode&&13!=e.keyCode||w.submitEducation()}))}else{var o={primary_unicountry:cur.selData.country_val[0],primary_unicity:cur.selData.city_val[0]};e.appendChild(ProfileEditorEdu.genUniRow(0)),ProfileEditorEdu.initUniRow(t,null,(e=>{T(g.RegistrationFieldItemNames.EDU_FORM,(function(){g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.FIRST_EDUCATION,cur.eventScreen)})),w.checkSave(e)}),(()=>{var e=ProfileEditorEdu.addUniParams({},{id:0},"primary_uni");o.primary_unicountry!=e.primary_unicountry&&g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.COUNTRY,e.primary_unicountry||""),o.primary_unicity!=e.primary_unicity&&g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.CITY,e.primary_unicity||""),o.primary_unigraduation!=e.primary_unigraduation&&g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.GRADUATION,e.primary_unigraduation||""),o.primary_uniuniversity!=e.primary_uniuniversity&&g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.UNIVERSITY,e.primary_uniuniversity||""),o.primary_unifaculty!=e.primary_unifaculty&&g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.FACULTY,e.primary_unifaculty||""),o.primary_unichair!=e.primary_unichair&&g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.CHAIR,e.primary_unichair||""),o.primary_uniedu_form!=e.primary_uniedu_form&&g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.EDU_FORM,e.primary_uniedu_form||""),o.primary_uniedu_status!=e.primary_uniedu_status&&g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.EDU_STATUS,e.primary_uniedu_status||""),o=e})),w.checkSave((0,a.ge)("u_university0").value)}w.initStats()},submitEducation(){var e,t;if(cur.isSchool?(t={act:"a_save_education_school"},(t=ProfileEditorEdu.addSchoolParams(t,{id:0},"school0")).school0school||(e=(0,p.getLang)("join_need_school")),t.school0id=-1):(t={act:"a_save_education_uni"},(t=ProfileEditorEdu.addUniParams(t,{id:0},"primary_uni")).primary_uniuniversity||(e=(0,p.getLang)("join_need_uni")),t.primary_uniid=cur.uniId||-1),e)return g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.INCORRECT_EDUCATION,cur.eventScreen),(0,E.joinLogProgress)(S.JoinProgressLog.SCREEN_EDUCATION,S.JoinProgressLog.STATUS_ERROR,cur.isSchool?S.JoinProgressLog.ERROR_EMPTY_SCHOOL:S.JoinProgressLog.ERROR_EMPTY_UNIVERSITY),w.showMsg("join_submit_result",e),!0;var n=(0,a.ge)("join_save");t.hash=cur.saveHash,ajax.post("al_profileEdit.php",t,{onDone:()=>{R(),g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.SCREEN_PROCEED,cur.eventScreen,g.EventScreens.REGISTRATION_EMAIL),(0,E.joinLogProgress)(S.JoinProgressLog.SCREEN_EDUCATION,S.JoinProgressLog.STATUS_SUCCESS),nav.go("/join?act=email")},showProgress:s.lockButton.pbind(n),hideProgress:s.unlockButton.pbind(n)})},initEmail(){var e=(0,a.ge)("pedit_email");(0,l.addEvent)(e,"keydown change",(function(t){T(g.RegistrationFieldItemNames.EMAIL,(function(){g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.FIRST_EMAIL,cur.eventScreen)})),10===t.keyCode||13===t.keyCode?w.submitEmail():w.checkSave(e.value),g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.EMAIL,e.value)})),w.checkSave(),w.initStats()},submitEmail(){var e={email:document.querySelector("#pedit_email").value.trim(),is_new:1,hash:cur.saveHash};if(!e.email)return g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.ERROR_EMPTY_EMAIL,cur.eventScreen),(0,E.joinLogProgress)(S.JoinProgressLog.SCREEN_EMAIL,S.JoinProgressLog.STATUS_ERROR,S.JoinProgressLog.ERROR_EMPTY_EMAIL),w.showMsg("join_submit_result",(0,p.getLang)("join_need_email")),!0;var t=(0,a.ge)("join_save");e.hash=cur.saveHash,ajax.post("al_settings.php?act=a_bind_mail",e,{onDone:()=>{R(),g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.SCREEN_PROCEED,cur.eventScreen),(0,E.joinLogProgress)(S.JoinProgressLog.SCREEN_EMAIL,S.JoinProgressLog.STATUS_SUCCESS),location.href="/feed"},onFail:e=>{if(void 0!==e){var t=void 0!==e.message?e.message:e;w.showMsg("join_submit_result",t),"ALREADY_USED"===e.code?(0,E.joinLogProgress)(S.JoinProgressLog.SCREEN_EMAIL,S.JoinProgressLog.STATUS_ERROR,S.JoinProgressLog.ERROR_EMAIL_ALREADY_USED):(0,E.joinLogProgress)(S.JoinProgressLog.SCREEN_EMAIL,S.JoinProgressLog.STATUS_ERROR,S.JoinProgressLog.ERROR_INCORRECT_EMAIL)}return!0},showProgress:()=>(0,s.lockButton)(t),hideProgress:()=>(0,s.unlockButton)(t)})},checkSave(e){(0,s.disableButton)((0,a.ge)("join_save"),!e)},showPolicy(e){(0,u.showBox)("al_help.php",{act:e,cc_id:cur.uiPhoneCountry.val()||0,box:1})},updatePolicyLink(e){var t=(0,a.geByClass1)("checkbox","join_accept_terms_checkbox");(0,s.checkbox)(t,0);ajax.post("join.php",{act:"update_policy",cc_id:e||0},{onDone:e=>{if(e){var t=(0,a.ge)("join_accept_terms_checkbox");if(t){var n=(0,a.geByClass1)("join_accept_terms_text",t);n&&(n.innerHTML=e)}}}})},phoneOnKeyUp(){clearTimeout(w.checkPhoneTimeout);var e=w.getPhone();e&&e!==w.prevPhone&&(e.length>4?w.checkPhoneTimeout=setTimeout((function(){ajax.post("activation.php",{act:"mrg_check_phone",phone:e,rnd:w.phoneMrgInstanceId},{onDone:t=>{w.prevPhone=e,!t&&w.defaultPhoneTip||(w.destroyPhoneTip(),t&&((0,a.ge)("join_phone_prefixed")?(0,s.notaBene)("join_phone_prefixed"):(0,s.notaBene)("join_phone"),w.defaultPhoneTip=!1))}})}),500):(w.prevPhone=e,w.defaultPhoneTip||w.destroyPhoneTip()))},destroyPhoneTip(){var e=(0,a.ge)("join_phone");e&&e.tt&&e.tt.destroy()},silentAuth(){},completeProceed(){R(),g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.SCREEN_PROCEED,cur.eventScreen,g.EventScreens.REGISTRATION_COUNTRY)},completeSkip(){R(),g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.SCREEN_SKIP,cur.eventScreen),(0,E.joinLogProgress)(S.JoinProgressLog.SCREEN_DONE,S.JoinProgressLog.STATUS_SKIP)},educationSkip(){R(),g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.SCREEN_SKIP,cur.eventScreen,g.EventScreens.REGISTRATION_EMAIL),(0,E.joinLogProgress)(S.JoinProgressLog.SCREEN_EDUCATION,S.JoinProgressLog.STATUS_SKIP)},contactsSkip(){R(),g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.SCREEN_SKIP,cur.eventScreen,g.EventScreens.REGISTRATION_EDUCATION),(0,E.joinLogProgress)(S.JoinProgressLog.SCREEN_CONTACTS,S.JoinProgressLog.STATUS_SKIP)},emailSkip(){R(),g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.SCREEN_SKIP,cur.eventScreen),(0,E.joinLogProgress)(S.JoinProgressLog.SCREEN_EMAIL,S.JoinProgressLog.STATUS_SKIP)},initDone(){R(),w.initStats(),(0,_.tmrTrackRegistration)()},initFbDone(){(0,_.tmrTrackRegistration)()},initFbStats(){cur.eventNextScreen?cur.eventCurrentScreen=cur.eventNextScreen:cur.eventCurrentScreen=g.EventScreens.OAUTH_FB,cur.eventNextScreen=void 0;var e=(0,a.isVisible)("join_phone_row"),t=(0,a.isVisible)("join_code_row"),n=(0,a.isVisible)("join_pass_row");e&&!t&&(cur.eventNextScreen=g.EventScreens.REGISTRATION_PHONE),n&&(cur.eventNextScreen=g.EventScreens.REGISTRATION_PASSWORD),e||t||n||(cur.eventNextScreen=g.EventScreens.REGISTRATION_COMPLETE),cur.eventNextScreen&&cur.eventCurrentScreen!==cur.eventNextScreen&&(g.registrationItemStat.logFieldInteraction(g.RegistrationFieldItemNames.FACEBOOK_REGISTRATION,g.EventFieldValues.REGISTERED_VIA_FB),g.registrationItemStat.logEvent(g.RegistrationItemEventTypes.SCREEN_PROCEED,cur.eventCurrentScreen,cur.eventNextScreen))},initIndexJoinForm:function(e){var t=document.querySelector(".JoinForm");(0,m.initJoinForm)(t,I({},e,{ref:"index"}))},initInviteJoinForm:function(e){var t=document.querySelector(".JoinForm");(0,m.initJoinForm)(t,I({},e,{ref:"invite"}))},initJoinBox:function(e){var t=(0,d.curBox)();t.changed=!0,t.setOptions({width:560,hideButtons:!0,bodyStyle:"padding: 0"});var n=t.bodyNode.querySelector(".JoinForm");(0,m.initJoinForm)(n,I({},e,{ref:"box"}))},initIndexJoinVKConnectButton:function(e,t){var n=document.querySelector(".JoinForm");(0,v.initJoinVKConnectButton)(n,I({},e,{unauthId:t}))},initIndexJoinVKConnectForm:function(e,t,n,o){var i=document.querySelector(".JoinForm");(0,v.initJoinVKConnectForm)(i,I({},e,{unauthId:t,phonePrefix:n,hash:o}))},initCommon:function(e){var t=e.logoutLabel,n=e.logoutHash,o=document.querySelector("#top_reg_link");o&&(clearTimeout(window.__joinTopTO),setTimeout((()=>{o.old=o.innerHTML,o.was=(0,a.isVisible)(o),o.innerHTML=t,o.onclick=e=>{if(cur.checkInterval&&clearInterval(cur.checkInterval),!1===checkEvent(e))return window.ajax.post("join.php",{act:"logout",hash:n}),cancelEvent(e)},(0,a.show)(o),cur.destroy.push((()=>{window.__joinTopTO=setTimeout((()=>{(0,a.val)(o,o.old),o.onclick=()=>{},o.was||(0,a.hide)(o)}),500)}))}),0)),(0,a.hide)("top_switch_lang","ts_wrap")}}},151107:(e,t,n)=>{n.d(t,{initJoinVKConnectButton:()=>h,initJoinVKConnectForm:()=>g});var o=n(988882),i=n(76238),r=n(919369),a=n(705456),s=n(873078),c=n(313020),l=n(41437),u=i.EventScreens.START;function d(e){var t=window.vk.apiConfigDomains,n=t.loginDomain,i=t.connectDomain;o.Config.init({appId:7913379,loginDomain:n,connectDomain:i,appSettings:{external_device_id:e,vkc_auth_action:"registration",promo:"registration"}})}function p(e){e&&(u=i.EventScreens.START_PROCEED_AS),window.cur.eventScreen=u,r.registrationItemStat.logEvent(i.RegistrationItemEventTypes.SCREEN_PROCEED,i.EventScreens.NOWHERE,u,{force:!0})}function h(e,t){var n=t.proceedAs;d(t.unauthId),p(n);var i=e.querySelector(".JoinForm__connectButton");if(i){i.addEventListener("click",(function(e){var t;e.preventDefault(),t=location.protocol+"//"+location.host+"/join",o.Connect.redirectAuth({url:t})}))}}function g(e,t){var n=t.proceedAs,h=t.unauthId,g=t.phonePrefix,_=t.hash;d(h),p(n);var m=e.querySelector('.JoinForm__textInput[name="phone"]'),v=e.querySelector(".JoinForm__connectButton"),S=e.querySelector(".JoinForm__connectError"),E=!1;if(m&&v&&S){var f=function(e){(0,a.notaBene)(m),S&&e&&(S.innerHTML=e),r.registrationItemStat.logEvent(i.RegistrationItemEventTypes.INCORRECT_PHONE_NUMBER,u,void 0,{force:!0})},y=function(){s.FlatButton.isLocked(v)||(!function(e){var t=String(e).replace(/[^0-9]/g,"").length;return t>=10&&t<=13}(m.value.trim().replace(" ",""))?f((0,l.getLang)("index_error_bad_phone")):function(e,t,n){var i=e.hash;window.ajax.post("join.php?act=connect",e,{onDone:function(e,r){if("error"===e)return f((0,l.getLang)("index_error_bad_phone")),void(0,a.notaBene)(n);s.FlatButton.lock(t);var c={url:location.protocol+"//"+location.host+"/join",action:{name:"registration_with_phone",token:r,params:{csrf_hash:i}}};o.Connect.redirectAuth(c)},showProgress:function(){return s.FlatButton.lock(t)},hideProgress:function(){return s.FlatButton.unlock(t)}})}({phone:m.value.trim(),hash:_},v,m))};(0,c.placeholderInit)(m),m.value=g,m.addEventListener("keyup",(function(){S&&S.innerHTML&&(S.innerHTML=""),E||(r.registrationItemStat.logEvent(i.RegistrationItemEventTypes.START_REG_TAP,u,void 0,{force:!0}),E=!0),r.registrationItemStat.logFieldInteraction(i.RegistrationFieldItemNames.FIRST_NAME,m.value)})),v.addEventListener("click",(function(e){e.preventDefault(),y()}))}}},496446:(e,t,n)=>{n.d(t,{JoinProgressLog:()=>o});var o={SCREEN_CONTACTS:"contacts",SCREEN_FINISH:"finish",SCREEN_DONE:"done",SCREEN_EDUCATION:"education",SCREEN_EMAIL:"email",STATUS_ERROR:"error",STATUS_SUCCESS:"success",STATUS_SKIP:"skip",ERROR_PASSWORD:"password error",ERROR_EMPTY_CONTACTS:"empty contacts",ERROR_EMPTY_SCHOOL:"empty school",ERROR_EMPTY_UNIVERSITY:"empty university",ERROR_EMPTY_EMAIL:"empty email",ERROR_INCORRECT_EMAIL:"incorrect email",ERROR_EMAIL_ALREADY_USED:"phone already used"}},209152:(e,t,n)=>{n.d(t,{joinLogProgress:()=>i});var o=n(986900);function i(e,t,n){(0,o.statlogsValueEvent)("join_progress",e,t,n)}}},i={};function r(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={id:e,loaded:!1,exports:{}};return o[e].call(n.exports,n,n.exports,r),n.loaded=!0,n.exports}r.m=o,e=[],r.O=(t,n,o,i)=>{if(!n){var a=1/0;for(u=0;u<e.length;u++){for(var[n,o,i]=e[u],s=!0,c=0;c<n.length;c++)(!1&i||a>=i)&&Object.keys(r.O).every((e=>r.O[e](n[c])))?n.splice(c--,1):(s=!1,i<a&&(a=i));if(s){e.splice(u--,1);var l=o();void 0!==l&&(t=l)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,o,i]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,r.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var i=Object.create(null);r.r(i);var a={};t=t||[null,n({}),n([]),n(n)];for(var s=2&o&&e;"object"==typeof s&&!~t.indexOf(s);s=n(s))Object.getOwnPropertyNames(s).forEach((t=>a[t]=()=>e[t]));return a.default=()=>e,r.d(i,a),i},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.e=()=>Promise.resolve(),r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={1092:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,[a,s,c]=n,l=0;for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(c)var u=c(r);for(t&&t(n);l<a.length;l++)i=a[l],r.o(e,i)&&e[i]&&e[i][0](),e[a[l]]=0;return r.O(u)},n=self.webpackChunkvk=self.webpackChunkvk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=r.O(void 0,[68592],(()=>r(867535)));a=r.O(a)})();